---
interface Props {
  id: string;
  title: string;
  description: string;
  publishedAt: Date;
  tags?: string[];
  variant?: "default" | "compact";
}

const { id, title, description, publishedAt, tags = [], variant = "default" } = Astro.props;

const formattedDate = publishedAt.toLocaleDateString("en-US", {
  year: "numeric",
  month: variant === "compact" ? "long" : "short",
  day: "numeric",
});
---

<a
  href={`/blog/${id}`}
  class="group block p-4 -mx-4 rounded-lg hover:bg-[var(--color-border)]/50 transition-colors"
>
  {variant === "default" ? (
    <>
      <div class="flex flex-col sm:flex-row sm:items-baseline sm:justify-between gap-2">
        <h2 class="text-xl font-medium group-hover:text-[var(--color-accent)]">
          {title}
        </h2>
        <time
          datetime={publishedAt.toISOString()}
          class="text-sm text-[var(--color-text-muted)] shrink-0"
        >
          {formattedDate}
        </time>
      </div>
      <p class="text-[var(--color-text-muted)] mt-2">
        {description}
      </p>
      {tags.length > 0 && (
        <div class="flex flex-wrap gap-2 mt-3">
          {tags.map((tag) => (
            <span class="px-2 py-0.5 text-xs bg-[var(--color-border)] rounded">
              {tag}
            </span>
          ))}
        </div>
      )}
    </>
  ) : (
    <>
      <h3 class="text-lg font-medium group-hover:text-[var(--color-accent)]">
        {title}
      </h3>
      <p class="text-[var(--color-text-muted)] mt-1">
        {description}
      </p>
      <time
        datetime={publishedAt.toISOString()}
        class="text-sm text-[var(--color-text-muted)] mt-2 block"
      >
        {formattedDate}
      </time>
    </>
  )}
</a>
